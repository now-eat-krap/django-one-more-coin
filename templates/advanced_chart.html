   <!-- TradingView Widget BEGIN -->
    <div class="tradingview-widget-container">
        <div id="tradingview"></div>
        <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/NASDAQ-AAPL/" rel="noopener" target="_blank"><span class="blue-text">AAPL Chart</span></a> by TradingView</div>
    </div>
        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
        <script type="text/javascript">
            const theme_button = document.querySelector('.mode-change-btn') 
            document.addEventListener('DOMContentLoaded', () => {
                advanced_chart();
                }
            )

            theme_button.addEventListener('click', () => {
                advanced_chart();
            });            


            function advanced_chart(){
                let theme = document.getElementById("theme").getAttribute("data-bs-theme");
                const widget = new TradingView.widget(
                    {
                        "width": 980,
                        "height": 610,
                        "symbol": "NASDAQ:AAPL",
                        "interval": "D",
                        "timezone": "Etc/UTC",
                        "theme": theme,
                        "style": "1",
                        "locale": "en",
                        "toolbar_bg": "#f1f3f6",
                        "enable_publishing": false,
                        "allow_symbol_change": true,
                        // ==================== BEGIN ====================
                        "studies": [
                            {
                                id: "MASimple@tv-basicstudies",
                                // This sets the period
                                inputs: {
                                    length: 200,
                                },
                            },
                            {
                                id: "RSI@tv-basicstudies",
                                inputs: {
                                    length: 4
                                 }
                             },
                             {
                                 id: "MAExp@tv-basicstudies",
                                 inputs: {
                                     length: 4
                                 }
                             },
                             {
                                 id: "MAExp@tv-basicstudies",
                                 inputs: {
                                     length: 12
                                 }
                             },
                             {
                                 id: "ATR@tv-basicstudies",
                             },

                         ],
                         // ====================  END  ====================
                         "container_id": "tradingview"
                   }
               );            
            }

        </script>
    <!-- TradingView Widget END -->
